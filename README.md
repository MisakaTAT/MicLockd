# MicLockd

锁定默认音频输入设备，防止意外切换。

## 有什么用？

在使用蓝牙耳机播放音频时，当会议应用（如腾讯会议）启用麦克风功能，macOS 会自动将蓝牙耳机从 A2DP 模式切换到 HFP/HSP 模式，导致音频质量显著下降。

HFP/HSP 模式仅支持单声道、8kHz 采样率，无法满足高质量音频播放需求。通过将默认输入设备锁定为 Mac 内置麦克风或其他音频输入设备，可以避免蓝牙耳机被切换到 HFP/HSP 模式，从而保持 A2DP 模式下的高质量音频输出。

## 原理呢？

蓝牙音频传输协议包含两种主要模式：

- **A2DP（Advanced Audio Distribution Profile）**：蓝牙高级音频分发协议，支持立体声输出，采样率可达 44.1kHz/16bit（CD 音质），专用于高质量音频和视频音频传输，但不支持麦克风输入。
- **HFP/HSP（Hands-Free Profile / Headset Profile）**：蓝牙免提/耳机协议，仅支持单声道、8kHz 采样率，专用于语音通话场景，支持双向音频（麦克风输入和音频输出）。

当 macOS 检测到应用程序需要使用麦克风时，系统会自动将蓝牙耳机从 A2DP 模式切换到 HFP 模式。这是蓝牙协议规范的限制，无法通过系统设置更改。

## 能做什么？

- 锁定默认音频输入设备
- 自动检测并恢复被更改的设备
- 设备断开连接后自动恢复

## 许可证

MIT License
